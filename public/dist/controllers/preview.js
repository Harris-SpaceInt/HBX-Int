"use strict";var app=angular.module("preview",["myApp"]);app.controller("previewCtrl",function(e,t,o,a,i){e.sharedData=a,e.pageInit=function(){e.sharedData.loggedIn()?a.checkAdmin()&&(t.location.href="#!/display"):t.location.href="#!/login",e.items=e.sharedData.projectList},e.edit=function(o){e.sharedData.project=e.items[o],e.items.splice(o,1),t.location.href="#!/entry"},e.deleteProject=function(o){var a=confirm("Are you sure you want to delete this project?");a&&(e.items.splice(o,1),0==e.items.length&&(t.location.href="#!/previous"))},e.addToDB=function(){for(var r=[],n=0;n<e.items.length;n++){var c=i.addProjectToDatabase(e.items[n]);r.push(c)}o.all(r).then(function(){e.items=[],a.clearProjectList(),t.location.href="#!/previous"})},e.addNew=function(){t.location.href="#!/entry"},e.pageInit()});